<h1 class="text-xl">
    <span class="underline">{{ fqcn|replace({
        'App\\Entity\\':'<span class="text-gray-500">App\\Entity\\</span>', 
        'App\\':'<span class="text-gray-500">App\\</span>'
        })|raw }}</span>
    <span class="text-primary">( {{ id }} )</span>
    <button 
        class="hover:text-blue-800 hover:border-blue-300 px-1 hover:cursor-pointer border border-transparent bg-blue-100 mb-1 px-1 rounded-xl"
        hx-get="{{ path('autoadmin_entity_view', {'fqcn': fqcn|url_encode, 'id': id}) }}" 
        hx-push-url="true"
        hx-target="#content" hx-swap="innerHTML">View</button>
    <button 
        class="hover:text-red-800 hover:border-red-300 px-1 hover:cursor-pointer border border-transparent bg-red-100 mb-1 px-1 rounded-xl"
        hx-get="{{ path('autoadmin_entity_delete', {'fqcn': fqcn|url_encode, 'id': id}) }}" 
        hx-push-url="true"
        hx-target="#content" hx-swap="innerHTML">Delete</button>
</h1>
<form id="editForm" method="POST"
    hx-post="{{ path('autoadmin_entity_update', {'fqcn': fqcn|url_encode, 'id': id}) }}" 
    hx-push-url="true"
    hx-target="#content" hx-swap="innerHTML">
    <input type="hidden" name="definitive" value="1" />
<div class="entity-display m-4 p-4 border border-gray-300 rounded bg-white">
    <table class="mb-4 min-w-1/2">
        <tbody>
        {% for field, value in entity %}
            <tr class="hover:bg-gray-100 align-text-top not-first:border-t border-gray-200">
                <td class="p-1"> <strong>{{ field }}{{ field == identifier ? ' (PK)' : '' }} </strong> </td>
                <td class="p-1"></td>
                <td class="p-1"></td>
                <td class="p-1"> {{ value|raw }} </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <button 
        class="hover:text-green-800 hover:border-green-300 hover:cursor-pointer border border-transparent bg-green-100 m-2 text-lg px-3 rounded-xl"
        type="submit"
        >Save</button>
</div> 
</form>

<div id="modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center" style="display: none;">
    <div class="bg-white p-4 rounded shadow-lg">
        <h2 class="text-xl mb-4">Confirm Deletion</h2>
        <p>Are you sure you want to delete this entity?</p>
        <div class="flex justify-end mt-4">
            <button id="confirmDelete" class="bg-red-500 text-white px-4 py-2 rounded">Delete</button>
            <button id="cancelDelete" class="bg-gray-300 text-gray-700 px-4 py-2 rounded ml-2">Cancel</button>
        </div>
    </div>
</div>

<script>
    function addChildInput(container, field, id) {
        let input = document.createElement('div');
        input.className = "mb-1";
        input.innerHTML = `
        <div class="flex flex-row items-center w-24">
            <input type="text" placeholder="${id}" name="${field}[]" value="" class="w-full border border-gray-300 rounded-l-lg h-6 px-1 py-0.5"/>
            <button type="button" onclick="this.parentElement.remove()" class="hover:text-red-800 hover:border-red-300 hover:cursor-pointer border border-transparent bg-red-100 px-2 h-6 rounded-r-lg" style="line-height: 0px">x</button>
        </div>`;
        container.appendChild(input);
    }
</script>